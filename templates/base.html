<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ูุธุงู ุฅุฏุงุฑุฉ ููุงุฑุฏ ุงููุคุณุณุฉ ุงููุชูุงูู - BGH ERP System">
    <meta name="keywords" content="ERP, ูุญุงุณุจุฉ, ูุจูุนุงุช, ูุดุชุฑูุงุช, ูุฎุฒูู, ููุงุฑุฏ ุจุดุฑูุฉ">
    <meta name="author" content="BGH Systems">
    <title>{% block title %}BGH ERP - ูุธุงู ุญุณุงุจุงุช ูุชูุงูู{% endblock %}</title>
    
    <!-- Bootstrap 5 RTL -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block extra_css %}{% endblock %}
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-logo">
            <h1>๐ BGH ERP System</h1>
            <p>ูุธุงู ุฅุฏุงุฑุฉ ููุงุฑุฏ ุงููุคุณุณุฉ ุงููุชูุงูู</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-primary" onclick="erpSystem.loadDashboardData()">
                ๐ ุชุญุฏูุซ
            </button>
            <button class="btn btn-success" onclick="showNotifications()">
                ๐ ุงูุฅุดุนุงุฑุงุช
            </button>
            <button class="btn btn-warning" onclick="showUserMenu()">
                ๐ค ุงูุญุณุงุจ
            </button>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-menu">
        <ul>
            <li><a href="/" class="active">๐ ุงูุฑุฆูุณูุฉ</a></li>
            <li><a href="#" data-module="customers">๐ฅ ุงูุนููุงุก</a></li>
            <li><a href="#" data-module="suppliers">๐ฆ ุงูููุฑุฏูู</a></li>
            <li><a href="#" data-module="products">๐ท๏ธ ุงูููุชุฌุงุช</a></li>
            <li><a href="#" data-module="invoices">๐ฐ ุงูููุงุชูุฑ</a></li>
            <li><a href="#" data-module="sales">๐ ุงููุจูุนุงุช</a></li>
            <li><a href="#" data-module="purchases">๐ฅ ุงููุดุชุฑูุงุช</a></li>
            <li><a href="#" data-module="inventory">๐ ุงููุฎุฒูู</a></li>
            <li><a href="#" data-module="hr">๐ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</a></li>
            <li><a href="/admin">โ๏ธ ุงูุฅุฏุงุฑุฉ</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <main class="main-content">
            {% block content %}
            <!-- Dashboard -->
            <div class="dashboard">
                <h2>ููุญุฉ ุงููุนูููุงุช ุงูุฑุฆูุณูุฉ</h2>
                
                <!-- Stats -->
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="icon">๐ฅ</div>
                        <div class="number" id="total-customers">0</div>
                        <div class="label">ุงูุนููุงุก</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">๐ท๏ธ</div>
                        <div class="number" id="total-products">0</div>
                        <div class="label">ุงูููุชุฌุงุช</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">๐ฐ</div>
                        <div class="number" id="total-invoices">0</div>
                        <div class="label">ุงูููุงุชูุฑ</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">๐</div>
                        <div class="number" id="total-orders">0</div>
                        <div class="label">ุงูุทูุจุงุช</div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <h3>ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
                    </div>
                    <div id="recent-activity">
                        <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h3>ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h3>
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="createNew('customer')">
                            โ ุนููู ุฌุฏูุฏ
                        </button>
                        <button class="btn btn-primary" onclick="createNew('product')">
                            โ ููุชุฌ ุฌุฏูุฏ
                        </button>
                        <button class="btn btn-success" onclick="createNew('invoice')">
                            โ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
                        </button>
                        <button class="btn btn-success" onclick="createNew('order')">
                            โ ุทูุจ ุฌุฏูุฏ
                        </button>
                        <button class="btn btn-warning" onclick="generateReport()">
                            ๐ ุชูุฑูุฑ
                        </button>
                        <button class="btn btn-danger" onclick="exportData()">
                            ๐ฅ ุชุตุฏูุฑ ุงูุจูุงูุงุช
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module Content Container -->
            <div id="module-content"></div>
            {% endblock %}
        </main>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; padding: 20px; color: white; margin-top: 30px;">
        <p>ยฉ 2025 BGH ERP System | ูุธุงู ุญุณุงุจุงุช ูุชูุงูู | ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
        <p style="margin-top: 10px;">
            <a href="https://github.com/BGHUSSEINSASH/bghusseinsashodoo" target="_blank" style="color: white; text-decoration: none;">
                ๐ฆ GitHub
            </a> | 
            <a href="https://bghusseinsash07.web.app" target="_blank" style="color: white; text-decoration: none;">
                ๐ฅ Firebase
            </a>
        </p>
    </footer>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript -->
    <script src="{% static 'js/app.js' %}"></script>
    {% block extra_js %}{% endblock %}

    <script>
        // Helper functions
        function showNotifications() {
            const toast = new bootstrap.Toast(document.getElementById('notificationToast'));
            toast.show();
        }

        function showUserMenu() {
            const menu = confirm('ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ');
            if (menu) {
                window.location.href = '/admin/logout/';
            }
        }

        function createNew(type) {
            erpSystem.showNotification(`ุฌุงุฑู ูุชุญ ูููุฐุฌ ุฅุถุงูุฉ ${type} ุฌุฏูุฏ...`, 'info');
            // Open modal for creating new record
            const modal = new bootstrap.Modal(document.getElementById('createModal'));
            modal.show();
        }

        function generateReport() {
            erpSystem.showNotification('ุฌุงุฑู ุฅูุดุงุก ุงูุชูุฑูุฑ...', 'info');
            // Implement report generation
        }

        function exportData() {
            const format = prompt('ุงุฎุชุฑ ุตูุบุฉ ุงูุชุตุฏูุฑ: json ุฃู csv', 'json');
            if (format === 'json' || format === 'csv') {
                erpSystem.showNotification(`ุฌุงุฑู ุชุตุฏูุฑ ุงูุจูุงูุงุช ุจุตูุบุฉ ${format.toUpperCase()}...`, 'info');
                // Implement export logic
            }
        }
    </script>
    
    <!-- Toast Notification -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <i class="bi bi-bell-fill text-primary me-2"></i>
                <strong class="me-auto">ุฅุดุนุงุฑ</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body">
                ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ
            </div>
        </div>
    </div>
    
    <!-- Create Modal -->
    <div class="modal fade" id="createModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ุฅุถุงูุฉ ุณุฌู ุฌุฏูุฏ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modalContent">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Load QWeb Templates -->
    <script>
        // Load QWeb templates
        fetch("{% static 'templates/qweb_templates.xml' %}")
            .then(response => response.text())
            .then(xml => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xml, "text/xml");
                window.qwebTemplates = xmlDoc;
            });
    </script>

    <!-- Components Framework -->
    <script src="{% static 'js/components.js' %}"></script>
</body>
</html>
